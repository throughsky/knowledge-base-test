# AI 小组建设任务清单

## 任务总览

| # | 任务领域                                | 核心目标                                                                                               | 优先级 |
| - | --------------------------------------- | ------------------------------------------------------------------------------------------------------ | ------ |
| 1 | **知识库治理与L0约束**            | L0/L1/L2 知识库目录规范、AI Rules 仓库评审发布、标准使用方式推广                                       | P0     |
| 2 | **L2 仓库级自动化**               | CodeWiki （或其他)自动生成、GitHub Action 扫描维护、项目级文档内容定义                                 | P0     |
| 3 | **SpecKit 流程适配**              | 基于知识库目录适配 SpecKit 流程开发、测试效果验证，尤其是架构和测试方面的效果                          | P0     |
| 4 | **L1 项目级 AI 聚合**             | L2→L1 自动聚合、仓库摘要/服务拓扑/跨仓库模式自动生成                                                  | P0     |
| 5 | **集成测试体系**                  | 集成测试框架选型、规范制定、CI 集成方案                                                                | P1     |
| 6 | **基础架构公共平台**              | 链路追踪、CI/CD、sonar，review，日志监控等公共平台统一评估与维护或购买，以及其他的评估。架构管理流程。 | P1     |
| 7 | **基于知识库的类 Notebook 工具** | 类 NotebookLM 的 AI 问答工具，支持产品设计，新员工通过对话快速理解项目。以及设计方案。                 | P1     |
| 8 | **AI 效果评价体系和管理流程**     | AI Coding 效果度量标准、评估方法、持续改进机制。架构师和ai文档管理员的职责流程，架构管理流程。         | P2     |
| 9 | **AI 最佳实践持续探索**           | AI 过度堆叠防范、质量可控机制、需求拆分实践、Prompt 优化、问题反模式识别与治理。                       | P2     |

---



### 附录： AI 常见反模式识别

| 反模式                | 问题表现                     | 影响                          | 治理策略                |
| --------------------- | ---------------------------- | ----------------------------- | ----------------------- |
| **过度堆叠**    | 功能不断叠加，代码膨胀       | 可维护性下降、技术债务累积    | 增量迭代、定期重构      |
| **质量失控**    | 代码规范不一致，测试覆盖不足 | 线上缺陷率上升、Review 成本高 | 自动化检查、质量门禁    |
| **需求蔓延**    | 需求边界模糊，范围不断扩大   | 交付延期、返工频繁            | 需求拆分、MVP 优先      |
| **上下文丢失**  | AI 多轮对话后丢失项目上下文  | 生成代码与项目风格不一致      | 知识库强化、Prompt 优化 |
| **过度依赖**    | 开发者不理解 AI 生成的代码   | 维护困难、故障排查能力下降    | Code Review、知识传递   |
| **一次性思维**  | 追求一次生成完美代码         | 调试困难、难以迭代            | 增量生成、逐步验证      |
| **盲目信任**    | 不验证 AI 输出的正确性       | 引入隐蔽缺陷、安全漏洞        | 强制 Review、自动化测试 |
| **Prompt 随意** | Prompt 缺乏结构和规范        | 输出质量不稳定、难以复用      | Prompt 模板、最佳实践库 |


## 一、知识库治理与推广

### 1.1 知识库目录规范化

| 任务项                       | 优先级 | 负责角色   | 产出物                               |
| ---------------------------- | ------ | ---------- | ------------------------------------ |
| 完善 L0 企业级知识库内容评审 | P0     | 架构委员会 | 评审通过的 enterprise-standards/     |
| 制定知识库变更 Review 流程   | P0     | 架构组     | review-process.md 补充知识库变更章节 |
| 制定知识库发布流程           | P0     | 架构组     | 知识库版本发布 SOP                   |
| 建立知识库版本管理机制       | P1     | 架构组     | 语义化版本号 + CHANGELOG             |

### 1.2 AI Rules 仓库建设

| 任务项                   | 优先级 | 负责角色   | 产出物                         |
| ------------------------ | ------ | ---------- | ------------------------------ |
| 创建独立的 AI Rules 仓库 | P0     | 基础架构   | `org/ai-knowledge-base` 仓库 |
| 制定 AI Rules 贡献指南   | P1     | 架构组     | CONTRIBUTING.md                |
| 建立 AI Rules 评审机制   | P1     | 架构委员会 | PR Review 模板 + 检查清单      |
| 配置 AI Rules 仓库 CI    | P1     | DevOps     | Markdown Lint + 格式校验       |

### 1.3 标准使用方式与推广

| 任务项                    | 优先级 | 负责角色 | 产出物                 |
| ------------------------- | ------ | -------- | ---------------------- |
| 编写知识库接入指南        | P0     | 架构组   | 《项目接入知识库指南》 |
| 制作 Git Subtree 操作手册 | P0     | 架构组   | 图文教程 + 脚本工具    |
| 开发知识库初始化 CLI 工具 | P1     | 基础架构 | `kb-init` 命令行工具 |
| 组织知识库培训            | P1     | 架构组   | 培训材料 + 录播视频    |
| 建立知识库使用度量        | P2     | 架构组   | 接入率、活跃度看板     |

---

## 二、L2 仓库级知识库自动化

### 2.1 CodeWiki 自动生成

| 任务项                      | 优先级 | 负责角色 | 产出物                             |
| --------------------------- | ------ | -------- | ---------------------------------- |
| 评估 CodeWiki 工具能力      | P0     | 基础架构 | 评估报告                           |
| 制定 code-derived 生成标准  | P0     | 架构组   | 生成内容规范文档                   |
| 开发 CodeWiki GitHub Action | P1     | DevOps   | `.github/workflows/codewiki.yml` |
| 配置定时自动生成（周/月）   | P1     | DevOps   | Cron 触发的 Action                 |
| 建立生成内容人工审核机制    | P2     | 架构组   | Review 流程                        |

### 2.2 GitHub Action 自动化扫描

| 任务项                            | 优先级 | 负责角色 | 产出物                               |
| --------------------------------- | ------ | -------- | ------------------------------------ |
| 开发 context.md 完整性检查 Action | P0     | DevOps   | `check-context-md.yml`             |
| 开发知识库结构校验 Action         | P1     | DevOps   | `validate-knowledge-structure.yml` |
| 开发 CLAUDE.md 存在性检查         | P1     | DevOps   | PR 检查 + 提醒                       |
| 开发知识库过期检测                | P2     | DevOps   | 超过 N 天未更新告警                  |

### 2.3 仓库级内容定义

| 任务项                             | 优先级 | 负责角色 | 产出物                     |
| ---------------------------------- | ------ | -------- | -------------------------- |
| 制定 context.md 必填字段规范       | P0     | 架构组   | context.md 模板 + 校验规则 |
| 制定 decisions.md 记录规范         | P1     | 架构组   | ADR 模板                   |
| 制定 features/ 目录结构规范        | P1     | 架构组   | Feature 归档规范           |
| 定义 .knowledge-config.yaml 配置项 | P1     | 架构组   | 配置项说明文档             |

---

## 三、L1 项目级知识库自动化

### 3.1 AI 聚合功能开发

| 任务项                      | 优先级 | 负责角色 | 产出物                                |
| --------------------------- | ------ | -------- | ------------------------------------- |
| 设计 AI 聚合架构方案        | P0     | 架构组   | 技术方案文档                          |
| 开发仓库摘要自动聚合 Action | P1     | 基础架构 | `aggregate-repo-summaries.yml`      |
| 开发服务拓扑自动生成        | P1     | 基础架构 | `service-topology.md` 生成器        |
| 开发跨仓库模式识别          | P2     | 基础架构 | `cross-repo-patterns.md` 生成器     |
| 开发改进建议生成            | P2     | 基础架构 | `improvement-suggestions.md` 生成器 |

### 3.2 项目级文档内容定义

| 任务项                        | 优先级 | 负责角色 | 产出物                  |
| ----------------------------- | ------ | -------- | ----------------------- |
| 制定 domain-model.md 规范     | P0     | 架构组   | 领域模型文档模板        |
| 制定 glossary.md 术语词典规范 | P0     | 架构组   | 术语词典模板 + 校验规则 |
| 制定 service-catalog.md 规范  | P1     | 架构组   | 服务目录模板            |
| 制定 repo-map.md 规范         | P1     | 架构组   | 仓库地图模板            |
| 制定 tech-stack.md 规范       | P1     | 架构组   | 技术栈声明模板          |

### 3.3 自动化更新机制

| 任务项                   | 优先级 | 负责角色 | 产出物                     |
| ------------------------ | ------ | -------- | -------------------------- |
| 设计 L2→L1 聚合触发机制 | P0     | 架构组   | 触发策略文档               |
| 开发 L2 变更监听 Action  | P1     | DevOps   | Webhook / 定时扫描         |
| 开发 L1 自动更新 PR 生成 | P1     | DevOps   | 自动创建 PR + 人工审核     |
| 建立聚合内容版本追溯     | P2     | DevOps   | `last-updated.json` 管理 |

---

## 四、SpecKit 流程适配

### 4.1 流程开发

| 任务项                              | 优先级 | 负责角色 | 产出物                      |
| ----------------------------------- | ------ | -------- | --------------------------- |
| 评估 SpecKit 与知识库集成方案       | P0     | 架构组   | 集成方案文档                |
| 开发知识库感知的 /speckit.specify   | P1     | 基础架构 | 规格生成时引用知识库约束    |
| 开发知识库感知的 /speckit.plan      | P1     | 基础架构 | 规划时校验架构合规性        |
| 开发知识库感知的 /speckit.implement | P1     | 基础架构 | 实现时强制遵循编码规范      |
| 集成架构合规性检查                  | P1     | 基础架构 | ARCH-001/002/003 错误码检查 |

### 4.2 测试与验证

| 任务项                          | 优先级 | 负责角色 | 产出物              |
| ------------------------------- | ------ | -------- | ------------------- |
| 设计 SpecKit 知识库集成测试用例 | P0     | QA       | 测试用例文档        |
| 搭建 SpecKit 测试环境           | P1     | DevOps   | 测试环境 + 示例项目 |
| 执行端到端测试                  | P1     | QA       | 测试报告            |
| 收集试点项目反馈                | P1     | 架构组   | 反馈汇总 + 改进项   |
| 输出 SpecKit 最佳实践           | P2     | 架构组   | 最佳实践文档        |

---

## 五、测试体系完善

### 5.1 单元测试规范（已有基线）

| 任务项                         | 优先级 | 负责角色 | 产出物                    |
| ------------------------------ | ------ | -------- | ------------------------- |
| 评审现有单测覆盖率要求         | P1     | 架构组   | testing-standards.md 更新 |
| 制定单测质量标准（非空断言等） | P1     | 架构组   | 单测质量检查规则          |

### 5.2 集成测试规范（待建设）

| 任务项                   | 优先级 | 负责角色 | 产出物                 |
| ------------------------ | ------ | -------- | ---------------------- |
| 调研集成测试框架选型     | P0     | 架构组   | 选型评估报告           |
| 制定集成测试规范         | P0     | 架构组   | integration-testing.md |
| 定义集成测试覆盖场景     | P1     | 架构组   | 核心场景清单           |
| 制定 Mock/Stub 使用规范  | P1     | 架构组   | Mock 规范文档          |
| 设计测试数据管理方案     | P1     | 架构组   | 测试数据管理规范       |
| 制定集成测试 CI 集成方案 | P1     | DevOps   | CI Pipeline 配置       |
| 建立集成测试覆盖率度量   | P2     | QA       | 覆盖率看板             |

### 5.3 E2E 测试规范（可选）

| 任务项              | 优先级 | 负责角色 | 产出物         |
| ------------------- | ------ | -------- | -------------- |
| 评估 E2E 测试必要性 | P2     | 架构组   | 评估报告       |
| 制定 E2E 测试规范   | P2     | 架构组   | e2e-testing.md |

---

## 六、基础架构公共平台建设

### 6.1 链路追踪平台

| 任务项                       | 优先级 | 负责角色   | 产出物                               |
| ---------------------------- | ------ | ---------- | ------------------------------------ |
| 评估现有链路追踪方案         | P0     | 基础架构   | 现状评估报告                         |
| 选型统一链路追踪平台         | P0     | 架构委员会 | 选型决策（Jaeger/SkyWalking/Zipkin） |
| 制定 TraceId/SpanId 传递规范 | P0     | 架构组     | 已有（architecture-principles.md）   |
| 开发链路追踪 SDK/Starter     | P1     | 基础架构   | Spring Boot Starter                  |
| 制定接入指南                 | P1     | 基础架构   | 接入文档                             |
| 建立链路追踪运维规范         | P2     | SRE        | 运维手册                             |

### 6.2 CI/CD 平台

| 任务项                   | 优先级 | 负责角色   | 产出物                               |
| ------------------------ | ------ | ---------- | ------------------------------------ |
| 评估现有 CI/CD 方案      | P0     | DevOps     | 现状评估报告                         |
| 统一 CI/CD 平台选型      | P0     | 架构委员会 | 选型决策（GitHub Actions/GitLab CI） |
| 制定 Pipeline 模板规范   | P1     | DevOps     | 标准 Pipeline 模板                   |
| 开发可复用 Action/Job 库 | P1     | DevOps     | 共享 Action 仓库                     |
| 制定分支策略规范         | P1     | 架构组     | Git 分支管理规范                     |
| 制定发布流程规范         | P1     | 架构组     | 已有（release-process.md）           |
| 建立 CI/CD 度量看板      | P2     | DevOps     | 构建时长、成功率看板                 |

### 6.3 其他公共平台评估

| 任务项                   | 优先级 | 负责角色   | 产出物                  |
| ------------------------ | ------ | ---------- | ----------------------- |
| 盘点现有公共平台清单     | P0     | 基础架构   | 平台资产清单            |
| 评估日志平台统一方案     | P1     | 基础架构   | ELK/Loki 选型评估       |
| 评估监控告警平台统一方案 | P1     | 基础架构   | Prometheus/Grafana 评估 |
| 评估配置中心统一方案     | P1     | 基础架构   | Nacos 配置中心规范      |
| 评估 API 网关统一方案    | P2     | 基础架构   | 网关选型评估            |
| 制定公共平台接入优先级   | P1     | 架构委员会 | 接入路线图              |

---

## 七、里程碑规划

### Phase 1：基础建设（第 1-2 周）

- [ ] L0 企业级知识库内容评审完成
- [ ] 知识库 Review/发布流程制定
- [ ] Git Subtree 操作手册编写
- [ ] context.md 模板规范制定

### Phase 2：自动化能力（第 3-4 周）

- [ ] CodeWiki GitHub Action 开发
- [ ] 知识库结构校验 Action 开发
- [ ] SpecKit 知识库集成方案设计
- [ ] 集成测试规范制定

### Phase 3：聚合与推广（第 5-6 周）

- [ ] L2→L1 AI 聚合功能开发
- [ ] SpecKit 知识库集成开发
- [ ] 链路追踪平台选型完成
- [ ] CI/CD 平台统一

### Phase 4：优化迭代（第 7-8 周）

- [ ] 试点项目接入与反馈收集
- [ ] 知识库培训与推广
- [ ] 度量看板建设
- [ ] 最佳实践输出

---

## 七、知识库 Notebook 工具建设

> 目标：构建类似 Google NotebookLM 的 AI 问答工具，基于三层知识库内容，支持新员工通过对话方式快速理解项目架构、业务逻辑和技术规范。

### 7.1 需求与场景

| 场景            | 用户        | 典型问题                            |
| --------------- | ----------- | ----------------------------------- |
| 新员工入职      | 新员工      | "项目的核心业务流程是什么？"        |
| 技术 Onboarding | 新员工/转岗 | "订单服务依赖哪些下游服务？"        |
| 规范查询        | 开发人员    | "创建订单接口应该用什么命名规范？"  |
| 架构理解        | 开发人员    | "为什么禁止在事务内调用外部 HTTP？" |
| 故障排查        | 开发/运维   | "TraceId 的格式是什么？如何传递？"  |

### 7.2 技术选型评估

| 任务项                     | 优先级 | 负责角色   | 产出物                         |
| -------------------------- | ------ | ---------- | ------------------------------ |
| 调研 NotebookLM 类产品能力 | P0     | 架构组     | 竞品分析报告                   |
| 评估自建 vs 采购方案       | P0     | 架构委员会 | 选型决策                       |
| 评估 RAG 技术栈选型        | P1     | 基础架构   | LangChain/LlamaIndex/Dify 评估 |
| 评估向量数据库选型         | P1     | 基础架构   | Milvus/Pinecone/Weaviate 评估  |
| 评估 LLM 选型              | P1     | 架构委员会 | GPT-4/Claude/私有化部署评估    |

### 7.3 核心功能开发

| 任务项                            | 优先级 | 负责角色 | 产出物              |
| --------------------------------- | ------ | -------- | ------------------- |
| 设计知识库索引方案                | P0     | 基础架构 | 索引架构文档        |
| 开发 L0/L1/L2 文档向量化 Pipeline | P1     | 基础架构 | 文档 Embedding 服务 |
| 开发知识库增量更新机制            | P1     | 基础架构 | 增量索引 Action     |
| 开发 RAG 检索服务                 | P1     | 基础架构 | 检索 API            |
| 开发对话式问答接口                | P1     | 基础架构 | Chat API            |
| 开发 Web UI 界面                  | P2     | 前端     | Notebook Web 应用   |
| 集成 Slack/飞书/企微 Bot          | P2     | 基础架构 | IM Bot              |

### 7.4 知识库适配

| 任务项                   | 优先级 | 负责角色 | 产出物            |
| ------------------------ | ------ | -------- | ----------------- |
| 定义知识库元数据标注规范 | P1     | 架构组   | 元数据 Schema     |
| 开发 L0 企业规范索引     | P1     | 基础架构 | 规范问答能力      |
| 开发 L1 项目知识索引     | P1     | 基础架构 | 业务/架构问答能力 |
| 开发 L2 仓库上下文索引   | P1     | 基础架构 | 代码级问答能力    |
| 建立知识库来源引用机制   | P1     | 基础架构 | 回答附带文档链接  |

### 7.5 运营与推广

| 任务项                 | 优先级 | 负责角色  | 产出物               |
| ---------------------- | ------ | --------- | -------------------- |
| 制定 Notebook 使用指南 | P1     | 架构组    | 用户手册             |
| 建立问答质量反馈机制   | P1     | 架构组    | 👍👎 反馈 + 改进闭环 |
| 收集高频问题优化知识库 | P2     | 架构组    | 知识库补充清单       |
| 建立 Notebook 使用度量 | P2     | 基础架构  | 使用量、满意度看板   |
| 纳入新员工入职流程     | P2     | HR/架构组 | 入职 Checklist 更新  |

---

## 八、AI 效果评价体系

> 目标：建立 AI Coding 效果的量化评估标准，持续度量、反馈、改进 AI 辅助开发的实际价值。

### 8.1 评价维度设计

| 维度                 | 说明                       | 核心指标                            |
| -------------------- | -------------------------- | ----------------------------------- |
| **代码质量**   | AI 生成代码的质量水平      | 规范符合率、缺陷密度、Review 通过率 |
| **开发效率**   | AI 对开发效率的提升        | 任务完成时间、代码产出量、迭代速度  |
| **知识库效果** | 知识库对 AI 输出的影响     | 约束遵循率、规范引用率、架构合规率  |
| **用户满意度** | 开发者对 AI 辅助的主观评价 | NPS 评分、采纳率、重复使用率        |
| **业务价值**   | AI 对业务目标的贡献        | 需求交付周期、线上缺陷率、技术债务  |

### 8.2 指标体系设计

| 任务项                      | 优先级 | 负责角色 | 产出物                  |
| --------------------------- | ------ | -------- | ----------------------- |
| 设计 AI Coding 效果评价框架 | P0     | 架构组   | 评价框架文档            |
| 定义代码质量评价指标        | P0     | 架构组   | 质量指标定义 + 计算公式 |
| 定义开发效率评价指标        | P0     | 架构组   | 效率指标定义 + 基线数据 |
| 定义知识库效果评价指标      | P1     | 架构组   | 知识库指标定义          |
| 定义用户满意度评价指标      | P1     | 架构组   | 满意度调查问卷          |
| 建立指标基线（AI 使用前）   | P1     | 架构组   | 基线数据报告            |

### 8.3 数据采集与度量

| 任务项                  | 优先级 | 负责角色 | 产出物            |
| ----------------------- | ------ | -------- | ----------------- |
| 设计数据采集方案        | P0     | 基础架构 | 数据采集架构      |
| 开发 AI Commit 标记识别 | P1     | DevOps   | Commit 分析脚本   |
| 开发代码规范检查集成    | P1     | DevOps   | Lint/静态分析集成 |
| 开发 PR Review 数据采集 | P1     | DevOps   | Review 指标采集   |
| 建立知识库引用追踪      | P1     | 基础架构 | 引用日志分析      |
| 开发开发者满意度调查    | P2     | 架构组   | 定期调查问卷      |

### 8.4 评估报告与看板

| 任务项                   | 优先级 | 负责角色 | 产出物           |
| ------------------------ | ------ | -------- | ---------------- |
| 设计 AI 效果评估报告模板 | P1     | 架构组   | 报告模板         |
| 开发 AI 效果度量看板     | P1     | 基础架构 | Grafana/自建看板 |
| 建立周/月报告机制        | P1     | 架构组   | 定期报告流程     |
| 建立指标异常告警         | P2     | DevOps   | 指标下降告警     |
| 建立团队/项目对比分析    | P2     | 架构组   | 对比分析报告     |

### 8.5 持续改进机制

| 任务项               | 优先级 | 负责角色   | 产出物                     |
| -------------------- | ------ | ---------- | -------------------------- |
| 建立效果反馈闭环     | P1     | 架构组     | 反馈 → 分析 → 改进流程   |
| 建立知识库优化机制   | P1     | 架构组     | 基于数据的知识库迭代       |
| 建立 Prompt 优化机制 | P1     | 架构组     | Prompt 版本管理 + A/B 测试 |
| 建立最佳实践沉淀     | P2     | 架构组     | AI Coding 最佳实践库       |
| 建立效果评审会议     | P2     | 架构委员会 | 季度效果评审               |

### 8.6 核心指标参考

```yaml
# AI Coding 效果核心指标（参考）

代码质量指标:
  规范符合率: "AI 代码通过 Lint 检查的比例，目标 ≥95%"
  Review通过率: "AI 代码首次 Review 通过比例，目标 ≥80%"
  缺陷密度: "AI 代码缺陷数/千行代码，目标 ≤ 人工代码"
  架构合规率: "AI 代码通过架构检查比例，目标 ≥90%"

开发效率指标:
  任务完成时间: "使用 AI 后任务平均完成时间变化"
  代码产出量: "人均日代码产出量变化"
  迭代周期: "需求从开发到上线的周期变化"

知识库效果指标:
  约束遵循率: "AI 输出符合 L0 约束的比例"
  规范引用率: "AI 输出中引用知识库规范的比例"
  术语一致率: "AI 输出使用标准术语的比例"

用户满意度指标:
  NPS评分: "开发者净推荐值，目标 ≥30"
  采纳率: "AI 建议被采纳的比例，目标 ≥70%"
  重复使用率: "开发者持续使用 AI 的比例"
```

---

## 九、干系人与职责

### 9.1 角色职责矩阵

| 角色                      | 职责                            | 关键决策                        |
| ------------------------- | ------------------------------- | ------------------------------- |
| **架构委员会**      | 规范评审、技术选型决策          | L0 内容审批、平台选型           |
| **架构师**          | 架构设计、AI 架构评审、技术指导 | 架构方案、评审决策              |
| **AI 知识库管理员** | 知识库维护、内容质量、版本管理  | 知识库发布、内容审核            |
| **架构组**          | 规范制定、方案设计              | 规范文档、技术方案              |
| **基础架构**        | 工具开发、平台建设              | SDK、Action、CLI 工具、Notebook |
| **DevOps**          | CI/CD、自动化                   | Pipeline、Action 配置           |
| **QA**              | 测试规范、质量保障              | 测试用例、覆盖率标准            |
| **SRE**             | 运维规范、稳定性                | 监控告警、运维手册              |
| **前端**            | UI 开发                         | Notebook Web 界面               |
| **HR**              | 入职流程                        | 新员工 Onboarding               |

### 9.2 架构师职责详述

| 职责领域              | 具体职责                               | 产出物             |
| --------------------- | -------------------------------------- | ------------------ |
| **架构设计**    | 系统架构设计、技术选型、架构原则制定   | 架构设计文档、ADR  |
| **AI 架构评审** | 使用 AI 工具辅助进行架构评审、合规检查 | 评审报告、改进建议 |
| **知识库贡献**  | 贡献架构原则、最佳实践到企业知识库     | L0/L1 知识库内容   |
| **技术指导**    | 指导开发团队遵循架构规范               | 技术指导意见       |
| **架构治理**    | 监控架构合规性、识别架构债务           | 架构健康度报告     |

### 9.3 AI 知识库管理员职责详述

| 职责领域           | 具体职责                                  | 产出物             |
| ------------------ | ----------------------------------------- | ------------------ |
| **内容管理** | 知识库内容审核、质量把控、版本管理        | 知识库版本发布     |
| **结构维护** | 维护 L0/L1/L2 知识库目录结构              | 目录结构规范       |
| **工具运营** | 运营 Notebook 工具、收集反馈、优化 Prompt | 运营报告、优化记录 |
| **培训推广** | 组织知识库培训、推广最佳实践              | 培训材料、推广活动 |
| **效果度量** | 跟踪知识库使用效果、输出度量报告          | 效果度量报告       |
| **协调沟通** | 协调各团队知识库贡献、解决冲突            | 协调会议纪要       |

### 9.4 AI 辅助架构评审机制

> 利用 AI 工具辅助架构师进行架构评审，提升评审效率和一致性。

#### 9.4.1 AI 架构评审任务

| 任务项                     | 优先级 | 负责角色 | 产出物              |
| -------------------------- | ------ | -------- | ------------------- |
| 设计 AI 辅助架构评审流程   | P0     | 架构组   | 评审流程文档        |
| 开发架构合规性自动检查工具 | P1     | 基础架构 | 合规检查 CLI/Action |
| 集成 AI 架构评审到 PR 流程 | P1     | DevOps   | PR 自动评审 Bot     |
| 建立架构评审知识库         | P1     | 架构组   | 评审规则库          |
| 开发架构风险识别工具       | P2     | 基础架构 | 风险扫描工具        |

#### 9.4.2 AI 架构评审检查项

```yaml
# AI 架构评审检查项（集成到 PR 流程）

分层架构检查:
  - "Controller 是否直接访问 Repository/DAO"
  - "是否存在循环依赖"
  - "基础设施层是否依赖业务层"

事务规范检查:
  - "@Transactional 是否指定 rollbackFor"
  - "事务内是否调用外部 HTTP 服务"
  - "写接口是否支持幂等性"

微服务通信检查:
  - "Feign 接口是否配置 FallbackFactory"
  - "是否设置超时时间"
  - "链路 ID 是否正确传递"

安全合规检查:
  - "是否存在硬编码密码/密钥"
  - "SQL 是否使用参数化查询"
  - "敏感数据是否脱敏处理"

命名规范检查:
  - "类名是否符合命名规范"
  - "方法名是否符合动词+名词规范"
  - "是否使用标准术语"
```

#### 9.4.3 AI 架构评审流程

```
┌─────────────────────────────────────────────────────────────────┐
│                    AI 辅助架构评审流程                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 开发者提交 PR                                               │
│         ↓                                                       │
│  2. AI 自动评审 Bot 触发                                        │
│         ↓                                                       │
│  3. 执行架构合规性检查（基于知识库规则）                        │
│         ↓                                                       │
│  4. 生成评审报告                                                │
│     ├── ✅ 通过项                                               │
│     ├── ⚠️ 警告项（需人工确认）                                 │
│     └── ❌ 阻断项（必须修复）                                   │
│         ↓                                                       │
│  5. 架构师人工复核（针对警告项和复杂场景）                      │
│         ↓                                                       │
│  6. 评审通过 / 返回修改                                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 十、AI 最佳实践持续探索

> 目标：识别和治理 AI Coding 过程中的反模式，建立持续探索和沉淀最佳实践的机制，确保 AI 辅助开发的质量可控。

### 10.1 AI 常见反模式识别

| 反模式                | 问题表现                     | 影响                          | 治理策略                |
| --------------------- | ---------------------------- | ----------------------------- | ----------------------- |
| **过度堆叠**    | 功能不断叠加，代码膨胀       | 可维护性下降、技术债务累积    | 增量迭代、定期重构      |
| **质量失控**    | 代码规范不一致，测试覆盖不足 | 线上缺陷率上升、Review 成本高 | 自动化检查、质量门禁    |
| **需求蔓延**    | 需求边界模糊，范围不断扩大   | 交付延期、返工频繁            | 需求拆分、MVP 优先      |
| **上下文丢失**  | AI 多轮对话后丢失项目上下文  | 生成代码与项目风格不一致      | 知识库强化、Prompt 优化 |
| **过度依赖**    | 开发者不理解 AI 生成的代码   | 维护困难、故障排查能力下降    | Code Review、知识传递   |
| **一次性思维**  | 追求一次生成完美代码         | 调试困难、难以迭代            | 增量生成、逐步验证      |
| **盲目信任**    | 不验证 AI 输出的正确性       | 引入隐蔽缺陷、安全漏洞        | 强制 Review、自动化测试 |
| **Prompt 随意** | Prompt 缺乏结构和规范        | 输出质量不稳定、难以复用      | Prompt 模板、最佳实践库 |

### 10.2 过度堆叠防范机制

| 任务项                         | 优先级 | 负责角色 | 产出物             |
| ------------------------------ | ------ | -------- | ------------------ |
| 制定单次 AI 生成代码量上限指南 | P0     | 架构组   | 生成规模指南       |
| 建立增量生成最佳实践           | P0     | 架构组   | 增量开发指南       |
| 开发代码复杂度监控             | P1     | DevOps   | 圈复杂度、行数监控 |
| 建立重构触发机制               | P1     | 架构组   | 重构触发阈值       |
| 制定功能边界确认 Checklist     | P1     | 架构组   | 功能边界检查清单   |

### 10.3 质量可控机制

| 任务项                   | 优先级 | 负责角色 | 产出物                  |
| ------------------------ | ------ | -------- | ----------------------- |
| 建立 AI 代码质量门禁     | P0     | DevOps   | PR 自动检查流程         |
| 制定 AI 代码 Review 重点 | P0     | 架构组   | Review 检查清单         |
| 开发 AI 生成代码标记机制 | P1     | DevOps   | Commit 标记规范         |
| 建立 AI 代码测试覆盖要求 | P1     | QA       | 测试覆盖率标准          |
| 开发质量趋势监控看板     | P1     | 基础架构 | 质量趋势看板            |
| 建立质量问题回溯机制     | P2     | 架构组   | 质量问题 → Prompt 优化 |

### 10.4 需求拆分最佳实践

| 任务项                     | 优先级 | 负责角色 | 产出物             |
| -------------------------- | ------ | -------- | ------------------ |
| 制定 AI 友好的需求拆分指南 | P0     | 架构组   | 需求拆分指南       |
| 建立需求粒度评估标准       | P0     | 架构组   | 粒度评估 Checklist |
| 制定 User Story 拆分模板   | P1     | 架构组   | Story 拆分模板     |
| 建立需求边界确认流程       | P1     | 架构组   | 边界确认 SOP       |
| 开发需求复杂度评估工具     | P2     | 基础架构 | 复杂度评估工具     |

#### 10.4.1 需求拆分原则

```yaml
# AI 友好的需求拆分原则

粒度原则:
  单一职责: "每个需求只做一件事"
  可验证性: "每个需求有明确的验收标准"
  独立性: "需求之间低耦合，可独立交付"
  估算范围: "单个需求 AI 生成代码不超过 200 行"

拆分策略:
  按功能边界: "登录、注册、忘记密码分开"
  按数据流: "输入验证、业务处理、结果返回分开"
  按层级: "Controller、Service、Repository 分开"
  按异常场景: "正常流程与异常处理分开"

反模式:
  - "实现用户模块" # 粒度太大
  - "做一个完整的订单系统" # 边界模糊
  - "优化性能" # 目标不明确

正确示例:
  - "实现用户登录接口，支持用户名密码登录"
  - "实现订单创建功能的参数校验逻辑"
  - "优化订单列表查询，将响应时间从 2s 降到 500ms"
```

### 10.5 Prompt 工程最佳实践

| 任务项                    | 优先级 | 负责角色 | 产出物           |
| ------------------------- | ------ | -------- | ---------------- |
| 建立 Prompt 模板库        | P0     | 架构组   | Prompt 模板集    |
| 制定 Prompt 编写规范      | P0     | 架构组   | Prompt 规范文档  |
| 建立 Prompt 版本管理机制  | P1     | 架构组   | 版本管理规范     |
| 开发 Prompt 效果 A/B 测试 | P1     | 基础架构 | A/B 测试框架     |
| 建立 Prompt 问题反馈闭环  | P1     | 架构组   | 反馈 → 优化流程 |
| 建立团队 Prompt 分享机制  | P2     | 架构组   | 分享会、知识库   |

#### 10.5.1 Prompt 模板示例

```yaml
# 结构化 Prompt 模板

context_setting:
  template: |
    项目背景：{project_description}
    技术栈：{tech_stack}
    代码规范：参考 L0 企业级知识库 {standard_reference}
    当前任务：{task_description}

requirement_specification:
  template: |
    ## 需求描述
    {requirement}

    ## 输入输出
    - 输入：{input_spec}
    - 输出：{output_spec}

    ## 约束条件
    - {constraint_1}
    - {constraint_2}

    ## 验收标准
    - {acceptance_criteria}

code_generation:
  template: |
    请基于以下规范生成代码：
    1. 遵循 {coding_standard} 命名规范
    2. 添加必要的参数校验
    3. 处理异常情况：{exception_scenarios}
    4. 添加关键日志（INFO 级别）
    5. 不要生成测试代码，我会单独要求

    需求：{requirement}

incremental_modification:
  template: |
    当前代码：
    ```{language}
    {existing_code}
    ```

    请进行以下修改：
    {modification_request}

    注意：
    - 只修改相关部分，保持其他代码不变
    - 保持原有代码风格
    - 说明修改了哪些地方
```

### 10.6 持续探索机制

| 任务项                 | 优先级 | 负责角色   | 产出物           |
| ---------------------- | ------ | ---------- | ---------------- |
| 建立 AI 实践案例库     | P0     | 架构组     | 案例库           |
| 建立问题反馈收集机制   | P0     | 架构组     | 反馈渠道 + 跟踪  |
| 组织定期 AI 实践分享会 | P1     | 架构组     | 月度分享会       |
| 建立反模式识别与预警   | P1     | 基础架构   | 反模式检测工具   |
| 建立外部最佳实践跟踪   | P1     | 架构组     | 业界实践跟踪报告 |
| 建立 AI 实践改进看板   | P2     | 架构组     | 改进项跟踪看板   |
| 组织季度 AI 实践回顾   | P2     | 架构委员会 | 季度回顾报告     |

### 10.7 核心最佳实践清单

```yaml
# AI Coding 核心最佳实践（持续更新）

开发流程:
  - "先拆分需求，再逐步生成代码"
  - "每次生成后立即验证，不要积累"
  - "保持代码可编译可运行状态"
  - "遇到问题先理解，不要盲目重试"

代码生成:
  - "单次生成不超过 200 行"
  - "生成后必须 Review 理解"
  - "保持增量迭代，避免大爆炸式生成"
  - "明确告诉 AI 不需要什么（如：不要生成测试）"

Prompt 技巧:
  - "提供足够的上下文（项目背景、技术栈、规范）"
  - "明确约束条件和边界"
  - "使用结构化的 Prompt 模板"
  - "告诉 AI 输出格式要求"

质量保障:
  - "AI 代码必须通过 CI 检查"
  - "AI 代码必须有对应的测试"
  - "AI 代码必须经过人工 Review"
  - "复杂逻辑需要开发者完全理解"

持续改进:
  - "记录好用的 Prompt，形成模板"
  - "遇到问题反馈，推动 Prompt 优化"
  - "分享成功经验，避免重复踩坑"
  - "跟踪质量指标，识别改进点"
```

---

## 十一、风险与依赖

| 风险项          | 影响          | 缓解措施                       |
| --------------- | ------------- | ------------------------------ |
| 知识库推广阻力  | 接入率低      | 领导支持 + 培训 + 工具简化     |
| AI 生成内容质量 | 需人工 Review | 建立审核机制 + 持续优化 Prompt |
| 跨团队协作      | 进度延迟      | 明确职责 + 定期同步            |
| 技术选型分歧    | 方案摇摆      | 架构委员会快速决策             |

---

*文档版本：v1.0.0*
*创建时间：2024-01*
*维护人：架构组*

### 10.1 AI 常见反模式识别

| 反模式                | 问题表现                     | 影响                          | 治理策略                |
| --------------------- | ---------------------------- | ----------------------------- | ----------------------- |
| **过度堆叠**    | 功能不断叠加，代码膨胀       | 可维护性下降、技术债务累积    | 增量迭代、定期重构      |
| **质量失控**    | 代码规范不一致，测试覆盖不足 | 线上缺陷率上升、Review 成本高 | 自动化检查、质量门禁    |
| **需求蔓延**    | 需求边界模糊，范围不断扩大   | 交付延期、返工频繁            | 需求拆分、MVP 优先      |
| **上下文丢失**  | AI 多轮对话后丢失项目上下文  | 生成代码与项目风格不一致      | 知识库强化、Prompt 优化 |
| **过度依赖**    | 开发者不理解 AI 生成的代码   | 维护困难、故障排查能力下降    | Code Review、知识传递   |
| **一次性思维**  | 追求一次生成完美代码         | 调试困难、难以迭代            | 增量生成、逐步验证      |
| **盲目信任**    | 不验证 AI 输出的正确性       | 引入隐蔽缺陷、安全漏洞        | 强制 Review、自动化测试 |
| **Prompt 随意** | Prompt 缺乏结构和规范        | 输出质量不稳定、难以复用      | Prompt 模板、最佳实践库 |
