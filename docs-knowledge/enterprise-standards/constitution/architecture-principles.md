# 架构原则

**版本**: 1.0
**状态**: 已发布

---

## 原则一：12-Factor App

| 要素 | 要求 |
|------|------|
| 配置 | 环境变量，禁止硬编码 |
| 进程 | 无状态，会话外部存储 |
| 日志 | 结构化JSON输出 |
| 并发 | 水平扩展能力 |

## 原则二：领域驱动设计

| 概念 | 应用 |
|------|------|
| 限界上下文 | 微服务边界 |
| 聚合根 | 事务边界 |
| 领域事件 | 服务间通信 |

## 原则三：API优先

```
OpenAPI设计 → 评审 → Mock → 并行开发 → 契约测试
```

## 原则四：可观测性

| 支柱 | 要求 |
|------|------|
| 日志 | 结构化JSON，含traceId |
| 指标 | Prometheus格式暴露 |
| 追踪 | 分布式追踪头传递 |

## 原则五：安全内建

- 认证：OAuth 2.0 / OIDC
- 授权：RBAC/ABAC，最小权限
- 数据：传输TLS，存储加密
- 输入：全部验证，防注入
