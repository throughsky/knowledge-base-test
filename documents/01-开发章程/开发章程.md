---
title: 开发章程
created: 2024-01-01
updated: 2024-11-30
version: 2.0
status: 已发布
tags: [开发章程, 核心原则, 编码规范, 项目规范]
---

# 开发章程

> 团队开发的核心原则和基本约定
> 基于 @rules/ 目录规范的关键要求总结

## 0. 强制规范总览（来自 @rules/ 目录）

### 0.1 项目结构规范（强制）

**包命名规则**：
- 根包名：`com.{company}.{project}`
- 示例：`com.example.appname`
- 主类命名：`{AppName}Application.java`（首字母大写）

**强制目录结构**：
- `config/` - 配置类目录
- `controller/` - REST控制器目录
- `service/` - 服务接口目录
- `service/impl/` - 服务实现目录
- `entity/` - 实体类目录（对应数据库表）
- `mapper/` - MyBatis Mapper目录
- `vo/request/` - 请求对象目录
- `vo/response/` - 响应对象目录
- `exception/` - 自定义异常目录

**测试目录**：必须与 `main` 目录结构完全对应

### 0.2 构建工具规范（强制）

**Gradle 要求**：
- 唯一构建工具（**禁止Maven**）
- 版本：≥ 8.14
- 必需文件：`build.gradle`、`settings.gradle`
- 禁止生成 `pom.xml`

### 0.3 技术栈规范（强制）

**核心框架**：
- Spring Boot（应用启动、自动装配）
- Spring Framework（IoC、AOP、事务）
- Spring Security（认证、授权）

**数据访问**：
- MyBatis/MyBatis-Spring（**注解模式优先**）
- MySQL 8.0+

**API层**：
- Spring MVC（RESTful API）
- Springdoc OpenAPI（文档生成）
- Jakarta Validation（参数校验）

**测试框架**：
- JUnit 5（单元测试）
- Mockito（Mock依赖）
- Spring Boot Test（集成测试）

### 0.4 编码规范（关键要求）

**命名规范**：
- 包名：全小写，点分隔
- 类名：UpperCamelCase
- 方法名：lowerCamelCase
- 常量：全大写，下划线分隔

**控制器规范**（@rules/04-conventions/controller.mdc）：
- 使用 `@RestController` 注解
- 类级别 `@RequestMapping` 指定版本（如 `/api/v1`）
- 统一返回 `CommonResponse` 包装对象
- 参数校验使用 `@Valid` 注解

**服务层规范**（@rules/04-conventions/service.mdc）：
- 接口在 `service` 包
- 实现在 `service.impl` 包，命名为 `{Interface}Impl`
- 使用 `@Service` 注解
- 事务使用 `@Transactional`

**数据访问规范**（@rules/04-conventions/mapper.mdc）：
- MyBatis注解模式优先
- SQL写在 `@Select`, `@Insert`, `@Update`, `@Delete` 中
- 复杂SQL使用 `@Results` 和 `@Result` 映射

**异常处理规范**（@rules/04-conventions/exception.mdc）：
- 自定义异常继承 `RuntimeException`
- 使用 `@ControllerAdvice` 统一处理
- 错误码使用枚举定义

**日志规范**（@rules/04-conventions/logging-aspect.mdc）：
- 使用 SLF4J Logger
- 统一格式：`[className] [methodName] [params] [result] [costTime]`
- 使用AOP统一记录方法调用日志

### 0.5 设计模式应用（L2层级）

**创建型模式**：
- Builder模式：复杂对象构建
- Factory模式：对象创建管理
- Singleton模式：资源管理

**结构型模式**：
- Adapter模式：第三方服务适配
- Decorator模式：功能增强（日志、缓存）
- Facade模式：复杂子系统封装

**行为型模式**：
- Strategy模式：算法选择（支付、验证）
- Observer模式：事件通知
- Chain of Responsibility模式：责任链处理

### 0.6 质量要求

**测试覆盖率**：≥ 80%
**代码审查**：必须通过
**静态检查**：无严重问题
**安全扫描**：无高危漏洞

**禁止事项**：
- ❌ 直接提交到主分支
- ❌ 提交没有测试的代码
- ❌ 提交没有文档的功能
- ❌ 忽略 Code Review 意见

## 1. 开发理念

### 1.1 质量第一
- **测试覆盖**: 所有代码必须有相应的测试用例
- **Code Review**: 所有代码必须经过同行评审
- **文档同步**: 代码变更必须同步更新文档

### 1.2 规范驱动
- **先设计后实现**: 任何功能都必须先编写设计规范
- **规范即文档**: SDD 规范作为单一事实源
- **AI 友好**: 规范格式要便于 AI 理解和生成代码

### 1.3 持续改进
- **重构文化**: 定期重构，保持代码健康
- **技术债务管理**: 有计划地偿还技术债务
- **最佳实践**: 持续学习和应用行业最佳实践

## 2. 开发流程

### 2.1 标准工作流

```
需求分析 → 规范编写 → 测试用例 → 实现代码 → Code Review → 合并 → 部署
```

### 2.2 关键要求

| 阶段 | 要求 | 工具 | 交付物 |
|------|------|------|--------|
| 需求分析 | 用户故事必须清晰 | Jira | 用户故事 |
| 规范编写 | SDD 文档评审通过 | Confluence | SDD 文档 |
| 测试用例 | 测试覆盖率 > 80% | Jest/JUnit | 测试代码 |
| 实现代码 | 符合规范 | IDE + AI | 业务代码 |
| Code Review | 至少 1 人批准 | GitLab/GitHub | Review 记录 |
| 部署 | 自动化部署 | Jenkins/GitLab CI | 成功部署 |

## 3. 代码规范

### 3.1 基本原则
- **可读性**: 代码是写给人类看的，附带让机器执行
- **简洁性**: 简单优于复杂，清晰优于技巧
- **一致性**: 团队遵循统一的编码风格

### 3.2 命名规范
- 使用有意义的英文命名
- 遵循语言社区惯例
- 避免缩写和拼音

```typescript
// ✅ 推荐
function calculateTotalPrice(items: CartItem[]): number

// ❌ 避免
function calcTtlPrc(itms: any[]): number
function jisuanJiage(shopingche: any[]): number
```

### 3.3 函数规范
- 单一职责: 一个函数只做一件事
- 短小精悍: 不超过 50 行
- 参数数量: 不超过 3 个

## 4. 文档规范

### 4.1 必须文档
- **SDD 文档**: 功能设计规范
- **API 文档**: 接口说明
- **架构文档**: 技术决策和架构设计
- **部署文档**: 部署和运维说明

### 4.2 文档标准
- 使用 Markdown 格式
- 包含头部元数据
- 文档间相互链接
- 定期更新维护

## 5. 质量门禁

### 5.1 代码质量
- 测试覆盖率: ≥ 80%
- Code Review: 必须通过
- 静态检查: 无严重问题
- 安全扫描: 无高危漏洞

### 5.2 禁止事项
- ❌ 直接提交到主分支
- ❌ 提交没有测试的代码
- ❌ 提交没有文档的功能
- ❌ 忽略 Code Review 意见

## 6. 协作规范

### 6.1 沟通原则
- 异步优先: 邮件、文档 > 会议
- 文档说话: 重要的决策必须文档化
- 及时反馈: 24 小时内回复讨论

### 6.2 Code Review 规范
- 友善评论: 对事不对人
- 具体建议: 给出具体的改进建议
- 解释原因: 说明为什么要这样改
- 及时评审: 收到 PR 后 24 小时内评审

## 7. 技术债务管理

### 7.1 识别和记录
- 在代码中添加 `TODO` 注释
- 在 Jira 中创建技术债务任务
- 定期审查技术债务清单

### 7.2 偿还计划
- 每个 Sprint 预留 20% 时间
- 技术债务专项 Sprint
- 重构与功能开发并行

## 8. 持续学习

### 8.1 学习计划
- 每周技术分享会
- 每月读书学习会
- 季度技术大会

### 8.2 知识沉淀
- 将学习成果写入文档
- 分享最佳实践
- 建立案例库

## 9. 度量与改进

### 9.1 关键指标
- 代码质量: 测试覆盖率、缺陷密度
- 开发效率: 交付速度、返工率
- 团队满意度: 代码审查满意度、技术债务感知

### 9.2 定期回顾
- 每周团队回顾
- 每月流程审视
- 季度架构审查

---

## 附录

### 相关文档
- [SDD 软件设计规范](../02-SDD软件设计规范/)
- [TDD 测试驱动开发](../03-TDD测试驱动开发/)
- [架构设计规范](../04-架构设计规范/)
