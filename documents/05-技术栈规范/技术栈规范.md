---
title: 技术栈规范
created: 2024-01-01
updated: 2024-01-01
version: 1.0
status: 已发布
tags: [技术栈, 选型规范]
---

# 技术栈规范

> 项目的核心技术栈和工具选择指南

## 1. 前端技术栈

### 1.1 框架选型

**React 18+ (推荐)**
- 适用场景: 大型 SPA, 需要高度交互的应用
- 优势: 生态成熟, 社区活跃, 灵活性高
- 关键库:
  - `react-router-dom` - 路由管理
  - `@tanstack/react-query` - 数据获取和缓存
  - `zustand` - 状态管理 (轻量级)
  - `formik` - 表单处理

**Next.js 14 (推荐)**
- 适用场景: SSR, SSG, 全栈应用
- 优势: 开箱即用, SEO 友好, 性能优秀
- App Router - React Server Components
- TypeScript 支持良好

### 1.2 语言
- **TypeScript 5.3+**: 强制类型安全
- 配置严格的 tsconfig.json
- 启用 strict mode

### 1.3 UI 库

**Ant Design 5.x**
- 企业级 UI 组件库
- TypeScript 支持
- 完善的国际化

**Tailwind CSS**
- 原子化 CSS 框架
- 高度可定制
- 文件体积小

### 1.4 构建工具
- **Vite 5.x**: 开发体验优秀, 构建速度快

### 1.5 测试工具
- **Jest**: 单元测试框架
- **React Testing Library**: React 组件测试
- **Cypress**: E2E 测试

### 1.6 代码质量
- **ESLint**: 代码检查
- **Prettier**: 代码格式化

## 2. 后端技术栈

### 2.1 Node.js 生态

**NestJS 10+**
- 基于 Express 的企业级框架
- TypeScript 全面支持
- 依赖注入容器
- 模块化架构

**关键库**:
- `@nestjs/typeorm` - ORM
- `class-validator` - DTO 验证
- `jsonwebtoken` - JWT
- `bcryptjs` - 密码加密

### 2.2 Python 生态

**FastAPI** (推荐)
- 高性能异步框架
- 自动生成 API 文档
- 类型提示支持

### 2.3 数据库

**PostgreSQL 15+ (推荐)**
- 功能最丰富
- 强大的 JSONB 支持

**MySQL 8.0+**
- 使用广泛
- 性能优秀

**Redis 7+**
- 缓存和会话存储

### 2.4 消息队列

**RabbitMQ**
- 可靠的消息传递

**Apache Kafka**
- 高吞吐量
- 持久化日志

**应用场景**: 异步处理、服务解耦、流量削峰

### 2.5 容器化

**Docker**
```dockerfile
# 多阶段构建优化
FROM node:20-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM node:20-alpine
WORKDIR /app
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/node_modules ./node_modules
CMD ["node", "dist/main.js"]
```

### 2.6 CI/CD

**GitHub Actions** 或 **GitLab CI**

### 2.7 API 网关

**Kong** 或 **Nginx**

### 2.8 监控和日志

**Prometheus + Grafana** - 监控
**ELK Stack** - 日志收集和分析

---

## 3. 安全规范

### 3.1 依赖安全

**定期扫描**
```bash
npm audit
npm audit fix
```

### 3.2 密钥管理

```typescript
// ✅ 使用环境变量
const API_KEY = process.env.API_KEY;

// ❌ 不要硬编码
const API_KEY = 'sk-1234567890abcdef';
```

## 4. 性能目标

### 4.1 API 性能

| 指标 | 目标 |
|------|------|
| P50 响应时间 | < 100ms |
| P95 响应时间 | < 200ms |
| P99 响应时间 | < 500ms |
| 错误率 | < 0.1% |
| 吞吐量 | 1000+ TPS |

### 4.2 前端性能

| 指标 | 目标 |
|------|------|
| 首屏加载时间 | < 3s |
| FCP | < 1.8s |
| LCP | < 2.5s |
| CLS | < 0.1 |

## 5. 技术选型标准

### 5.1 前端框架选择矩阵

| 因素 | Next.js | React SPA | Vue 3 |
|------|---------|-----------|-------|
| 团队熟悉度 | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 性能 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| 生态 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |

### 5.2 数据库选择

| 场景 | 推荐 | 备选 |
|------|------|------|
| 关系型数据 | PostgreSQL | MySQL |
| 键值存储 | Redis | Memcached |
| 文档存储 | MongoDB | DynamoDB |

## 6. 技术债务管理

### 6.1 依赖更新策略

```json
{
  "dependencies": {
    "主要依赖": "及时更新",
    "次要依赖": "定期更新"
  }
}
```

### 6.2 版本控制

```bash
# 使用 lockfile
npm ci              # 使用锁定版本
# ❌ 避免
npm install         # 可能更新版本
```

---

## 附录

### A. 相关文档
- [架构设计原则](../04-架构设计规范/架构设计原则.md)
- [安全规范](../01-开发章程/安全规范.md)
- [性能优化指南](../01-开发章程/性能优化指南.md)
